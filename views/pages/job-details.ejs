<%- include('../partials/header', { title }) %>

    <main class="job-details-page">
        <h2>
            <%= job.title %>
        </h2>
        <p><strong>Company:</strong>
            <%= job.company %>
        </p>
        <p><strong>Location:</strong>
            <%= job.location %>
        </p>
        <p><strong>Posted By:</strong>
            <%= job.postedBy %>
        </p>
        <p><strong>Posted At:</strong>
            <%= job.postedDate.toDateString() %>
        </p>
        <p>
            <%= job.description %>
        </p>

        <% if (applied) { %>
            <div class="success-message" id="successMessage">
                âœ… Application sent successfully!
            </div>
            <% } %>

                <% if (applied) { %>
                    <button class="btn applied-btn" disabled>Applied</button>
                    <% } else { %>
                        <a href="/jobs/<%= job._id %>/apply" class="btn apply-btn">Apply</a>
                        <% } %>
                            <a href="/jobs" class="btn">Back to Jobs</a>
    </main>

    <script>
        // Auto hide success message
        const successMsg = document.getElementById("successMessage");
        if (successMsg) {
            setTimeout(() => {
                successMsg.style.display = "none";
            }, 3000); // 3 seconds
        }
    </script>